<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Full Kalman Filter Animation</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  <script src="../js/draggable-number.js"></script>
  <script src="../js/formula-element.js"></script>
  <script src="../js/formula-element-definitions.js"></script>
  <script src="../js/mouse-effects-manager.js"></script>
  <script src="../js/gaussian-functions.js"></script>
  <script src="../js/kalman-filter-functions.js"></script>

  <script>
      const mouseEffectsManager = new MouseEffectsManager([...Object.values(variables)]);
  </script>
  <script src="../js/mathjax-dynamic-initialization.js"></script>
<script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<link rel="stylesheet" href="../css/svg-animation-style.css">
</head>
<body>
    <div id="full-kalman-filter-diagram">    
        <div class="animation-container">
            <!-- SVG Robot -->
            <svg
                width="78.827438mm"
                height="90.709648mm"
                viewBox="0 0 78.827438 90.709648"
                version="1.1"
                class="animation-robot"
                xml:space="preserve"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:svg="http://www.w3.org/2000/svg"><defs
                class="defs1" /><g
                class="body-layer"
                transform="translate(-22.948456,-89.841802)"><path
                    style="opacity:0.99;fill:#a9c2ff;stroke:#858585;stroke-width:0.315"
                    d="m 60,90 c 9.621514,-0.06872 27.937315,4.966259 35,20 4.885644,8.69531 7.13726,41.14576 3.852748,47.30871 -3.130752,5.87445 -32.595817,6.76909 -39.141815,6.62609 -5.654366,-0.0512 -28.523962,0.63944 -31.397083,-7.34956 -3.240816,-11.23592 6.026113,-21.40713 7.734165,-41.25892 C 36.681208,107.96705 32.12253,92.455092 60,90 Z"
                    class="body-blob" /><circle
                    style="opacity:0.99;fill:#dcdffc;fill-opacity:1;stroke:#858585;stroke-width:0.315"
                    class="eye-white"
                    cx="77.621758"
                    cy="111.97367"
                    r="9.547823" /><circle
                    style="opacity:1;fill:#0f113f;fill-opacity:1;stroke:#020202;stroke-width:0.495001;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                    class="eye-pupil"
                    cx="77.621758"
                    cy="111.97367"
                    r="2.6847837" /><g
                    class="ultrasonic-group"
                    transform="matrix(0.46871921,0,0,0.46871921,-27.37283,72.641369)"><path
                    class="rect6"
                    style="opacity:1;fill:#0f113f;fill-opacity:1;stroke:#858585;stroke-width:0.495001;stroke-linecap:square"
                    d="m 127.17951,61.399733 12.57342,10.103943 -0.0408,63.504364 -12.50358,-10.33231 z" /><g
                    class="ultrasonic-cylinder-1"><path
                        class="rect5"
                        style="opacity:1;fill:#bcc2cf;fill-opacity:1;stroke:#858585;stroke-width:0.495;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none"
                        d="m 121.33471,71.751176 c -0.48654,0 -0.8785,0.391438 -0.8785,0.877983 v 20.853507 c 0,0.486545 0.39196,0.877983 0.8785,0.877983 h 11.71867 v 0 c 2.05411,-6.42e-4 4.84521,-5.137415 4.84518,-11.304737 3e-5,-6.167322 -2.79107,-11.304094 -4.84518,-11.304736 v 0 z" /><ellipse
                        style="opacity:0.99;fill:#25282e;fill-opacity:1;stroke:#858585;stroke-width:0.769677"
                        class="path3"
                        cx="120.45645"
                        cy="83.1931"
                        rx="3.719537"
                        ry="11.167632" /></g><g
                    class="ultrasonic-cylinder-2"><path
                        class="path7"
                        style="opacity:1;fill:#bcc2cf;fill-opacity:1;stroke:#858585;stroke-width:0.495;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none"
                        d="m 121.33471,100.66893 c -0.48654,0 -0.8785,0.39144 -0.8785,0.87799 v 20.8535 c 0,0.48655 0.39196,0.87799 0.8785,0.87799 h 11.71867 v 0 c 2.05411,-6.4e-4 4.84521,-5.13742 4.84518,-11.30474 3e-5,-6.16732 -2.79107,-11.30409 -4.84518,-11.30474 v 0 z" /><ellipse
                        style="opacity:0.99;fill:#25282e;fill-opacity:1;stroke:#858585;stroke-width:0.769677"
                        class="ellipse7"
                        cx="120.45645"
                        cy="112.11086"
                        rx="3.719537"
                        ry="11.167632" /></g></g></g><g
                class="wheel-layer"
                transform="translate(-22.948456,-89.841802)"><g
                    class="front-wheel"
                    style="display:inline"
                    transform="translate(-49.063398,7.483203)"><circle
                    style="opacity:1;fill:#121212;fill-opacity:1;stroke:#020202;stroke-width:0.495001;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                    class="axle1"
                    cx="134.39388"
                    cy="156.62283"
                    r="1.7787484" /><circle
                    style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:4;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                    class="front-tire"
                    cx="134.39388"
                    cy="156.62283"
                    r="14.445418" /><circle
                    style="fill:none;fill-opacity:1;stroke:#020202;stroke-width:2.17772;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                    class="path9-9"
                    cx="134.39388"
                    cy="156.62283"
                    r="9.6793108" /><circle
                    style="fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                    class="circle9"
                    cx="134.39388"
                    cy="156.62283"
                    r="3.6967146" /><g
                    class="front-spokes-1"><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 134.39387,152.92612 v -5.9826"
                        class="path10" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 138.09059,156.62283 h 5.98259 v 0"
                        class="path11" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 134.39387,160.31955 v 5.98259"
                        class="path12" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 130.69716,156.62283 h -5.9826"
                        class="path13" /></g><g
                    class="front-spokes-2"
                    transform="rotate(45,134.39387,156.62284)"><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 134.39387,152.92612 v -5.9826"
                        class="path17" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 138.09059,156.62283 h 5.98259 v 0"
                        class="path18" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 134.39387,160.31955 v 5.98259"
                        class="path19" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 130.69716,156.62283 h -5.9826"
                        class="path20" /></g></g><g
                    class="rear-wheel"
                    style="display:inline"
                    transform="translate(-95,7.483203)"><circle
                    style="opacity:1;fill:#121212;fill-opacity:1;stroke:#020202;stroke-width:0.495001;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                    class="axle2"
                    cx="134.39388"
                    cy="156.62283"
                    r="1.7787484" /><circle
                    style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:4;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                    class="circle36"
                    cx="134.39388"
                    cy="156.62283"
                    r="14.445418" /><circle
                    style="fill:none;fill-opacity:1;stroke:#020202;stroke-width:2.17772;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                    class="circle37"
                    cx="134.39388"
                    cy="156.62283"
                    r="9.6793108" /><circle
                    style="fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                    class="circle38"
                    cx="134.39388"
                    cy="156.62283"
                    r="3.6967146" /><g
                    class="g41"><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 134.39387,152.92612 v -5.9826"
                        class="path38" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 138.09059,156.62283 h 5.98259 v 0"
                        class="path39" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 134.39387,160.31955 v 5.98259"
                        class="path40" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 130.69716,156.62283 h -5.9826"
                        class="path41" /></g><g
                    class="g45"
                    transform="rotate(45,134.39387,156.62284)"><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 134.39387,152.92612 v -5.9826"
                        class="path42" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 138.09059,156.62283 h 5.98259 v 0"
                        class="path43" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 134.39387,160.31955 v 5.98259"
                        class="path44" /><path
                        style="opacity:1;fill:none;fill-opacity:1;stroke:#020202;stroke-width:1.5;stroke-linecap:square;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1"
                        d="m 130.69716,156.62283 h -5.9826"
                        class="path45" /></g></g></g>
                </svg>
        </div>
        <div id="full-kalman-filter-state-diagram"></div>
        <table class="math-diagram-structure-table">
            <tr>
                <td>Control the robot's acceleration by dragging the number: \( \controlInput = \)</td>
                <td>
                    <table class="matrix-table">
                        <tr>
                            <td>
                                <draggable-number class="control-input-slider" min="-1" max="1" value="0.0" step="0.1"></draggable-number>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td>
                    <button class="start-button">Start</button>
                    <button class="stop-button">Stop</button>
                    <button class="reset-button">Reset</button>
                </td>
            </tr>
        </table>
    </div>
        <script>
            (function() {
            const diagram = document.getElementById('full-kalman-filter-diagram');
            // Also need to change the Plotly id
            const robot = diagram.querySelector('.animation-robot');
            const slider = diagram.querySelector('.control-input-slider');
            const container = diagram.querySelector('.animation-container');
            const startButton = diagram.querySelector('.start-button');
            const stopButton = diagram.querySelector('.stop-button');
            const resetButton = diagram.querySelector('.reset-button');

            /////////////////////////////////////////////////////////////
            // Kalman Filter parameters + models
            const wheelRadius = 50; //px (didn't actually measure this)
            const maxVelocity = 400; //px/sec
            const maxAngularAcceleration = 5; //rad/sec^2
            const KF_dt_min = 0.2; //seconds (determines how often the Predict step runs)
            const meas_dt_min = 0.5; //seconds (determines how often the Update step runs)

            // Truestate variables
            let throttle;  // -1 to 1
            let x; //px/s

            // Estimated state variables
            let x_est;
            let P_est;

            function resetAllVariables() {
                // Truestate variables
                throttle = parseFloat(slider.value);  // -1 to 1
                x = [[0], //px
                    [100]]; //px/s

                // Estimated state variables
                const initial_state_variance = 100;
                x_est = x;
                P_est = [[initial_state_variance,0],[0,initial_state_variance]];
            }
            resetAllVariables();

            /////////////////////////////////////////////////////////////
            /////////////////////////////////////////////////////////////

            // Pupil animation
            const frontWheel = robot.querySelector('.front-wheel');
            const rearWheel = robot.querySelector('.rear-wheel');
            const pupil = robot.querySelector('.eye-pupil');
            const eyeWhite = robot.querySelector('.eye-white');

            function updatePupilPosition(mouseX, mouseY) {
                const eyeWhiteRect = eyeWhite.getBoundingClientRect();
                const pupilRect = pupil.getBoundingClientRect();
                // Calculate the center of the eye
                const eyeCenterX = eyeWhiteRect.left + eyeWhiteRect.width / 2;
                const eyeCenterY = eyeWhiteRect.top + eyeWhiteRect.height / 2;
    
                // Calculate the angle between the eye center and the mouse position
                const angle = Math.atan2(mouseY - eyeCenterY, mouseX - eyeCenterX);
                const distance = Math.sqrt((mouseX - eyeCenterX) * (mouseX - eyeCenterX) + (mouseY - eyeCenterY) * (mouseY - eyeCenterY));
    
                // Calculate the maximum distance the pupil can move from the center
                const maxDistance = (eyeWhiteRect.width - pupilRect.width) / 2;
    
                // Calculate the new position of the pupil
                let pupilX = Math.cos(angle) * Math.min(distance, maxDistance);
                let pupilY = Math.sin(angle) * Math.min(distance, maxDistance);
                
                // Apply the new position to the pupil
                pupil.style.transform = `translate(${pupilX}px, ${pupilY}px)`;
            }
    
            // Add event listener for mouse movement
            container.addEventListener('mousemove', (e) => {
                updatePupilPosition(e.clientX, e.clientY);
            });

            // Update velocity when the slider value changes
            slider.addEventListener('input', () => {
                throttle = parseFloat(slider.value);
            });

            // State-space plot
            function updateStatePlot(x, x_est, P_est) {
                // Inputs:
                // x: true state (2x1 array)
                // x_est: estimated state (2x1 array)
                // P_est: estimated covariance (2x2 array)
                // Check input shapes
                if (!Array.isArray(x) || x.length !== 2 || !Array.isArray(x[0]) || x[0].length !== 1 ||
                    !Array.isArray(x_est) || x_est.length !== 2 || !Array.isArray(x_est[0]) || x_est[0].length !== 1 ||
                    !Array.isArray(P_est) || P_est.length !== 2 || !Array.isArray(P_est[0]) || P_est[0].length !== 2) {
                    console.error(`Invalid input shapes for updateStatePlot: x: ${x}, x_est: ${x_est}, P_est: ${P_est}`);
                    return;
                }
                //get the max width of the container for the state-diagram plot
                const maxY = maxVelocity+100;
                const lMargin = 40;
                const rMargin = 40;
                const layout = {
                    title: 'Kalman Filter State Space',
                    legend: {
                        orientation: 'h',
                        yanchor: 'top',
                        xanchor: 'center',
                        y: 1.05,
                        x: 0.5,
                    },
                    yaxis: {
                        title: 'Velocity (Pixels/Second)',
                        range: [-maxY,maxY],
                    },
                    xaxis: {
                        title: 'Position (Pixels)',
                        range: [0,container.clientWidth-lMargin-rMargin], // axis labels take some space
                    },
                    margin: {
                    l: lMargin,
                    r: rMargin,
                    t: 50,
                    b: 40,
                    },
                    hovermode: 'closest',
                }
                function getPlotPosition(x) {
                    return positiveModulo(x[0][0], container.clientWidth + 2*robot.clientWidth) - robot.clientWidth/2; //robot.clientWidth/2 is an offset so dot is at front or robot
                }
                // Apply the new position and wheel rotation to the robot
                const pixel_position = getPlotPosition(x);

                const center_true = {
                    x: [pixel_position],
                    y: [x[1][0]],
                    type: 'scatter',
                    mode: 'markers',
                    marker: { color: 'black' },
                    showlegend: true,
                    name: 'True State'
                }
                const x_est_mod = [[getPlotPosition(x_est)],
                                    [x_est[1][0]]];
                if (x_est_mod[1][0] > maxY+ 50) {
                    // just draw an arrow indicating where it is
                    const center_est_arrow = {
                        x: [x_est_mod[0][0]],
                        y: [maxY-30],
                        type: 'scatter',
                        mode: 'markers',
                        marker: {
                            symbol: 'triangle-up',
                            size: 12,
                            color: 'red'
                        },
                        showlegend: true,
                        name: 'Estimated State',
                    }
                    const traces = [center_true, center_est_arrow];
                    Plotly.react('full-kalman-filter-state-diagram', traces, layout);
                }
                else if (x_est_mod[1][0] < -maxY-50) {
                    const center_est_arrow = {
                        x: [x_est_mod[0][0]],
                        y: [-maxY+30],
                        type: 'scatter',
                        mode: 'markers',
                        marker: {
                            symbol: 'triangle-down',
                            size: 12,
                            color: 'red'
                        },
                        showlegend: true,
                        name: 'Estimated State',
                    }
                    const traces = [center_true, center_est_arrow];
                    Plotly.react('full-kalman-filter-state-diagram', traces, layout);
                }
                else {
                    const center_est = {
                        x: [x_est_mod[0][0]],
                        y: [x_est_mod[1][0]],
                        type: 'scatter',
                        mode: 'markers',
                        marker: { color: 'red' },
                        showlegend: false,
                    }
                    const contours_est = generateGaussianEllipticalContours(x_est_mod, P_est, color='red', name='Estimated State');
                    const traces = [center_true, center_est].concat(contours_est);
                    Plotly.react('full-kalman-filter-state-diagram', traces, layout);
                }
            }
            
            ///// Animation Start/Stop Controls /////
            // Stop running the animation when the user can't see it
            let animationRunning = true;
            function startAnimation() {
                animationRunning = true;
                requestAnimationFrame(animateRobot);
            }
            function stopAnimation() {
                animationRunning = false;
            }
            function resetAnimation() {
                resetAllVariables();
                renderAnimationAndPlot(x, x_est, P_est);
            }
            // Stop running when the user can't see the animation
            function handleIntersection(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        startAnimation();
                    } else {
                        stopAnimation();
                    }
                });
            }
            const observer = new IntersectionObserver(handleIntersection, {
                root: null, // Use the viewport as the root
                threshold: 0.1 // Trigger when 10% of the element is visible
            });
            observer.observe(container);

            // Start/Stop/Reset buttons
            startButton.addEventListener('click', () => {
                startAnimation();
            });
            stopButton.addEventListener('click', () => {
                stopAnimation();
            });
            resetButton.addEventListener('click', () => {
                resetAnimation();
            });

            // Function to animate the robot
            function renderAnimationAndPlot(x, x_est, P_est) {
                const wheelRotation = positiveModulo(x[0][0]/wheelRadius * 180/Math.PI, 360);
    
                // Apply the new position and wheel rotation to the robot
                const pixel_position = positiveModulo(x[0][0], container.clientWidth + 2*robot.clientWidth) - robot.clientWidth;
                robot.style.left = `${pixel_position}px`;
                // In the SVG the front wheel was originally drawn centered at 134.39388px 156.62283px
                // then the whole front wheel was translated by -47.066795px, 7.9443462px
                // We need to rotate the wheel about its translated center
                frontWheel.style.transformOrigin = `${134.39388 - 47.066795}px ${156.62283 + 7.9443462}px`;
                frontWheel.style.transform = `rotate(${wheelRotation}deg) translate(-47.066795px, 7.9443462px)`;
    
                // In the SVG the rear wheel was originally drawn centered at 134.39388px 156.62283px
                // then the whole rear wheel was translated by -95px, 7.9443462px
                // We need to rotate the wheel about its translated center
                rearWheel.style.transformOrigin = `${134.39388 - 95}px ${156.62283 + 7.9443462}px`;
                rearWheel.style.transform = `rotate(${wheelRotation}deg) translate(-95px, 7.9443462px)`;

                updateStatePlot(x, x_est, P_est);
            }

            let t_prev;
            let KF_t_prev; // Kalman Filter runs at slower rate than true state
            let measurement_t_prev; // Measurement update runs at slower rate than Kalman Filter

            function animateRobot(timestamp) {
                if (!animationRunning) {
                    t_prev = undefined;
                    return;
                }
                if (timestamp === undefined) {
                    console.error('animateRobot: timestamp is undefined. Ensure that animateRobot is being called by requestAnimationFrame or otherwise being passed a timestamp.');
                }
                if (t_prev === undefined) {
                    t_prev = timestamp;
                    KF_t_prev = timestamp;
                    measurement_t_prev = timestamp;
                }
                // True state
                const dt = (timestamp - t_prev) / 1000;
                t_prev = timestamp;
                x = trueStateModel(x, dt, throttle, wheelRadius, maxVelocity, maxAngularAcceleration);

                // Kalman state
                const KF_dt = (timestamp - KF_t_prev) / 1000; // ms to seconds
                const meas_dt = (timestamp - measurement_t_prev) / 1000;
                if (KF_dt >= KF_dt_min) {
                    KF_t_prev = timestamp;
                    if (meas_dt >= meas_dt_min) {
                        measurement_t_prev = timestamp;
                        // Take a measurement if possible
                        const z = trueMeasurementModel(x);
                        [x_est, P_est] = propagateKalmanFilter(x_est, P_est, KF_dt, throttle, wheelRadius, maxAngularAcceleration, z);
                    } else {
                        [x_est, P_est] = propagateKalmanFilter(x_est, P_est, KF_dt, throttle, wheelRadius, maxAngularAcceleration);
                    }
                }

                renderAnimationAndPlot(x, x_est, P_est);
                requestAnimationFrame(animateRobot);
            }
    
            // Start the animation
            updatePupilPosition(450,170);
            requestAnimationFrame(animateRobot);

            })();
        </script>
</body>
</html>
